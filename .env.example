# HemoStat Environment Configuration
# Copy this file to .env and customize for your environment
# WARNING: Never commit .env to version control - it may contain secrets!

# ============================================================================
# Redis Configuration
# ============================================================================
# Redis server hostname (use 'redis' for Docker Compose, 'localhost' for local dev)
REDIS_HOST=redis

# Redis server port (default: 6379)
REDIS_PORT=6379

# Redis database number (default: 0)
REDIS_DB=0

# Redis password (empty for local dev, required for production)
REDIS_PASSWORD=

# ============================================================================
# Logging Configuration
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json or text
LOG_FORMAT=json

# ============================================================================
# Agent Configuration
# ============================================================================
# Polling interval for Monitor agent (seconds between health checks)
AGENT_POLL_INTERVAL=30

# Maximum retry attempts for failed operations
AGENT_RETRY_MAX=3

# Initial retry delay in seconds (uses exponential backoff)
AGENT_RETRY_DELAY=1

# ============================================================================
# Threshold Configuration (for Monitor Agent)
# ============================================================================
# CPU usage alert threshold (percentage)
THRESHOLD_CPU_PERCENT=85

# Memory usage alert threshold (percentage)
THRESHOLD_MEMORY_PERCENT=80

# ============================================================================
# Safety Configuration (for Responder Agent)
# ============================================================================
# Cooldown period between remediation actions (seconds)
RESPONDER_COOLDOWN_SECONDS=3600

# Maximum remediation attempts per hour (circuit breaker)
RESPONDER_MAX_RETRIES_PER_HOUR=3

# Dry-run mode: set to true to test without actual remediation
RESPONDER_DRY_RUN=false

# ============================================================================
# Alert Configuration (for Alert Agent)
# ============================================================================
# Slack incoming webhook URL (leave empty to disable Slack notifications)
# Get webhook URL from: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=

# Master switch for all notifications (set to false to disable all alerts)
ALERT_ENABLED=true

# Redis event storage TTL in seconds (default: 1 hour)
# Events older than this will be automatically removed from Redis
ALERT_EVENT_TTL=3600

# Maximum events to keep per event type (default: 100)
# Keeps the most recent N events for dashboard consumption
ALERT_MAX_EVENTS=100

# Event deduplication cache TTL in seconds (default: 60)
# Prevents duplicate Slack notifications for the same event
ALERT_DEDUPE_TTL=60

# ============================================================================
# AI Configuration (for Analyzer Agent)
# ============================================================================
# OpenAI API key for GPT-4 (leave empty to disable)
OPENAI_API_KEY=

# Anthropic API key for Claude (leave empty to disable)
ANTHROPIC_API_KEY=

# AI model to use: gpt-4, claude-3-opus, claude-3-sonnet
AI_MODEL=gpt-4

# Force rule-based analysis (disable AI): set to true to skip AI and use rule-based logic only
# Default false: AI is used if API keys are available; falls back to rule-based on AI failure
AI_FALLBACK_ENABLED=false

# ============================================================================
# Analyzer Configuration (for Analyzer Agent)
# ============================================================================
# Confidence threshold for remediation (0.0-1.0)
# Alerts with confidence >= threshold will trigger remediation
ANALYZER_CONFIDENCE_THRESHOLD=0.7

# Maximum alerts to keep in history per container
ANALYZER_HISTORY_SIZE=10

# History TTL in seconds (default: 1 hour)
ANALYZER_HISTORY_TTL=3600

# ============================================================================
# Docker Configuration
# ============================================================================
# Docker daemon socket (for container monitoring)
DOCKER_HOST=unix:///var/run/docker.sock

# ============================================================================
# Dashboard Configuration
# ============================================================================
# Streamlit dashboard port (default: 8501)
# Should match the exposed port in docker-compose.yml
DASHBOARD_PORT=8501

# Dashboard refresh interval in seconds (default: 5)
# Controls how often the dashboard polls Redis for updates
# Lower values (1-2s) increase Redis load but provide faster updates
# Higher values (10-30s) reduce Redis load but delay updates
DASHBOARD_REFRESH_INTERVAL=5

# Maximum events to display in timeline (default: 100)
# Controls memory usage and rendering performance
# Increase for more historical data, decrease for better performance
DASHBOARD_MAX_EVENTS=100

# Enable/disable auto-refresh by default (default: true)
# Can be toggled in the dashboard UI sidebar
DASHBOARD_AUTO_REFRESH=true
